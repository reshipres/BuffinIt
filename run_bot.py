#!/usr/bin/env python3
"""
–ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ BUFF Pay

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ —Å BOT_TOKEN –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.
–¢–æ–∫–µ–Ω –î–û–õ–ñ–ï–ù –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –î–û –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π!
"""

import os
import sys

# === –≠–¢–ê–ü 1: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º BOT_TOKEN –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è ===
# –≠—Ç–æ –î–û–õ–ñ–ù–û –±—ã—Ç—å –î–û –∏–º–ø–æ—Ä—Ç–∞ bot.py –∏ config.py!

BOT_TOKEN = None

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
if len(sys.argv) > 1:
    BOT_TOKEN = sys.argv[1]
    print(f"‚úÖ BOT_TOKEN –ø–æ–ª—É—á–µ–Ω –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞")
else:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
    BOT_TOKEN = os.getenv("BOT_TOKEN")
    if BOT_TOKEN:
        print(f"‚úÖ BOT_TOKEN –ø–æ–ª—É—á–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è")

# –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å - —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –µ–≥–æ –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
if BOT_TOKEN:
    os.environ["BOT_TOKEN"] = BOT_TOKEN
else:
    print("‚ùå BOT_TOKEN –Ω–µ –Ω–∞–π–¥–µ–Ω!")
    print("\n–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:")
    print("  python run_bot.py <BOT_TOKEN>")
    print("\n–ü—Ä–∏–º–µ—Ä:")
    print("  python run_bot.py 7528975289:AAE9yRfmq2pYiJjI3WVkE-eMj9_vl1u8_cM")
    sys.exit(1)

# === –≠–¢–ê–ü 2: –¢–ï–ü–ï–†–¨ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º bot (—Ç–æ–∫–µ–Ω —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!) ===
print("\nüöÄ –ó–∞–ø—É—Å–∫–∞—é –±–æ—Ç–∞...")
print("-" * 60)
print()

try:
    import asyncio
    from bot import main
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é
    asyncio.run(main())
    
except KeyboardInterrupt:
    print("\n\n‚ö†Ô∏è  –ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (Ctrl+C)")
    sys.exit(0)
    
except Exception as e:
    print(f"\n‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞:")
    print(f"   {type(e).__name__}: {e}")
    import traceback
    print("\n–ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –æ—à–∏–±–∫–∏:")
    traceback.print_exc()
    sys.exit(1)
